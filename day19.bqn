âŸ¨ToNumsâŸ© â† â€¢Import "bqn-libs/strings.bqn"
âŸ¨HashmapâŸ© â† â€¢Import "bqn-libs/hashmap.bqn"

blueprints â† {ð•ŠÂ·â€¿aâ€¿bâ€¿câ€¿dâ€¿eâ€¿f: [aâ€¿0â€¿0,bâ€¿0â€¿0,câ€¿dâ€¿0,eâ€¿0â€¿f]}âˆ˜TonumsÂ¨â€¢FLines"input19.txt"

F â† {mins ð•Š bp:
  m â† HashmapËœâŸ¨âŸ©
  maxr â† minsâˆ¾ËœâŒˆËbp
  MaxG â† {
    1â‰¥tâ†âŠ‘ð•©? tÃ—Â¯1âŠ‘1âŠ‘ð•©;
    m.Has ð•©? m.Get ð•©;
    ð•Š tâ€¿robotsâ€¿res:
      rb â† 3â†‘robots
      gb â† Â¯1âŠ‘robots
      ð•©âŠ¸m.SetâŠ¸âŠ¢(tÃ—gb)âŒˆÂ´{
        âˆ¨Â´(rb+ð•©âŠbp)â‰¥res?
          bâ†ð•©
          recipe â† bâŠbp
          tn â† {âˆ§Â´0â‰¥ð•©? 1; âŒˆÂ´ð•©âŠ¸+âŠ¸{ð•¨Ã—âŠ¸Ã—(minsÃ—Â¬Ã—ð•©)+ð•¨âŒˆâˆ˜Ã·1âŒˆð•©}rb} recipe-res
          tâ‰¥tn?
            (tnÃ—gb) + MaxG âŸ¨t-tn, 1âŠ¸+âŒ¾(bâŠ¸âŠ‘)robots, recipe-Ëœres+tnÃ—rbâŸ©
        ; 0
      }Â¨{tâ‰¤3?âŸ¨3âŸ©;(maxr>robots)/â†•4}
  }
  MaxG âŸ¨mins, 1â€¿0â€¿0â€¿0, 0â€¿0â€¿0âŸ©
}
â€¢Show +Â´((1+Â·â†•â‰ )Ã—24 FÂ¨âŠ¢) blueprints
â€¢Show Ã—Â´32 FÂ¨ 3â†‘blueprints
