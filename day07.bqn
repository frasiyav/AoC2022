âŸ¨Split, ToNumsâŸ© â† â€¢Import "bqn-libs/strings.bqn"

Directory â† {
  nameâ€¿size â‡ ğ•©â€¿0
  filesâ€¿subdirs â‡ âŸ¨âŸ©â€¿âŸ¨âŸ©
  Add â‡ {
    ğ•Šsâ€¿f:
      files âˆ¾â†© <ğ•©
      size  +â†© âŠ‘ToNums s
    ;
    ğ•Šd:
      subdirs âˆ¾â†© d
      size    +â†© d.size
  }
}

i â† ' 'SplitÂ¨â€¢file.Lines"input07.txt"
Pop â† {Â·:xâ†âŠ‘iâ‹„iâ†©1â†“iâ‹„x}
Parse â† {
  âŸ¨âŸ©â‰¡i? ğ•©;
  dirâ†ğ•©
  {ğ•ğ•¨}Â´(Pop@)â€¿{
    "$"â€¿"cd"â€¿"..":
      dir
  ;
    "$"â€¿"cd"â€¿x:
      dir.Add Parse Directory x
      Parse dir
  ;
    "dir"â€¿x:
      Parse dir
  ;
    "$"â€¿"ls":
      Parse dir
  ;
    sizeâ€¿file:
      dir.Add sizeâ€¿file
      Parse dir
  }
}

fs â† Parse Directory "/"

# Part 1
â€¢Show {(100000âŠ¸â‰¥âŠ¸Ã—ğ•©.size)+Â´ğ•ŠÂ¨ğ•©.subdirs}fs

# Part 2
tâ†fs.size
reqâ†30000000-70000000-t
â€¢Show {(reqâŠ¸>âŠ¸Ã—âŸœtâŠ¸âŒˆğ•©.size)âŒŠÂ´ğ•ŠÂ¨ğ•©.subdirs}fs

