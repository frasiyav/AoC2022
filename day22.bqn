âŸ¨lf, Split, ToNumsâŸ© â† â€¢Import "bqn-libs/strings.bqn"

mâ€¿i â† (lfâˆ¾lf)Split â€¢FChars "input22.txt"
layoutdim â† 4â€¿3

m â†© Â¯1+" .#"âŠ>(âŒˆÂ´â‰ Â¨)âŠ¸(â†‘Â¨) lf Split m
midx â† â†•â‰¢m
facedim â† layoutdimÃ·Ëœâ‰¢m

instructions â† â‰(ToNumsâ‰0âˆ¾Ëœ"LR"âŠ¸(Â¯1â€¿1âŠËœâŠ£âŠâˆŠËœ/âŠ¢)) Â¯1â†“i
start â† 0â‹ˆËœ0âˆ¾âŠ‘/0=âŠm

layoutkey â† {yâ€¿x:y/x/Ë˜(âŠ¢â¥ŠÂ·â†•Ã—Â´)layoutdim}facedim
faces â† (facedimâŠ¸â¥ŠÂ¨ layoutkey âŠ”â—‹â¥Š âŠ¢)Â¨mâ€¿midx
cubekey â† âˆ¾facedimâŠ¸â¥ŠÂ¨[Â¯1â€¿0â€¿1,Â¯1â€¿2â€¿Â¯1,3â€¿4â€¿Â¯1,5â€¿Â¯1â€¿Â¯1]

Cube â† { mâ€¿mi ğ•Š rotâ€¿order:
  mâ€¿mi â†© {rot{(âŒ½â‰)âŸğ•¨ ğ•©}Â¨orderâŠğ•©}Â¨mâ€¿mi
  mr â† facedimâŠ¸â¥ŠÂ¨rot
  âˆ¾âŸœ(midx{<ğ•¨â‹âŠ¸âŠâŒ¾â¥ŠËœğ•©âŠ‘ğ•¨}1âŠ‘âŠ¢) (âˆ¾layoutdimâ¥ŠâŠ¢)Â¨mâ€¿miâ€¿mr
}

cubes â† facesâŠ¸CubeÂ¨âŸ¨
  âŸ¨0â€¿0â€¿0â€¿0â€¿1â€¿0â€¿2â€¿0â€¿0â€¿0â€¿0â€¿0,0â€¿7â€¿3â€¿5â€¿9â€¿8â€¿6â€¿1â€¿2â€¿10â€¿4â€¿11âŸ©
  âŸ¨0â€¿0â€¿0â€¿0â€¿0â€¿0â€¿0â€¿0â€¿2â€¿0â€¿1â€¿0,0â€¿6â€¿3â€¿5â€¿9â€¿8â€¿1â€¿2â€¿7â€¿10â€¿4â€¿11âŸ©
  âŸ¨0â€¿1â€¿0â€¿0â€¿0â€¿0â€¿3â€¿0â€¿3â€¿0â€¿0â€¿0,0â€¿9â€¿3â€¿5â€¿1â€¿8â€¿6â€¿4â€¿2â€¿10â€¿7â€¿11âŸ©
  âŸ¨0â€¿0â€¿0â€¿0â€¿1â€¿0â€¿2â€¿0â€¿0â€¿0â€¿0â€¿0,0â€¿2â€¿3â€¿5â€¿4â€¿8â€¿1â€¿6â€¿7â€¿10â€¿9â€¿11âŸ©
  âŸ¨0â€¿0â€¿0â€¿0â€¿0â€¿0â€¿0â€¿0â€¿2â€¿0â€¿1â€¿0,0â€¿1â€¿3â€¿5â€¿4â€¿8â€¿6â€¿7â€¿2â€¿10â€¿9â€¿11âŸ©
  âŸ¨0â€¿1â€¿0â€¿0â€¿0â€¿0â€¿3â€¿0â€¿3â€¿0â€¿0â€¿0,0â€¿4â€¿3â€¿5â€¿6â€¿8â€¿1â€¿9â€¿7â€¿10â€¿2â€¿11âŸ©
âŸ©

GetRow â† { ğ•¨ğ•Šcâ€¿d:
  yâ€¿x â† c âŠ‘ Â¯1âŠ‘ğ•¨
  (<Â·câŠ¸â‰¡Â¨1âŠ‘âŠ¢)âŠ¸âˆ¾ dâ—¶âŸ¨yâŠâŠ¢,xâŠâ‰,âŒ½yâŠâŠ¢,âŒ½xâŠâ‰âŸ©Â¨Â¯1â†“ğ•¨
}

_Move â† {nâ€¿rot ğ”½ _ğ•£ câ€¿r:
  pâ€¿mâ€¿miâ€¿mr â† ğ”½âŠ¸GetRow ğ•©
  np â† âŠ‘âˆ˜/ m {(âŠ¢âŠ£âŸ(âˆ¨Â´ğ•¨âˆ§âŠ¢)Â¯1âŒ½âŠ¢)âŸn ğ•©}âŒ¾((0â‰¤m)âŠ¸/) p
  âŸ¨npâŠ‘mi, 4|rot+r+npâŠ‘mrâŸ©
}

p1cube â† (<midx)âˆ¾Ëœâˆ¾âŸœ(<Â·0Â¨âŠ‘)mâ€¿midx

P1 â† mâ€¿midxâ€¿(0Â¨m)â€¿midx _Move
P2 â† âŠ‘âŸœcubekeyâŠ¸âŠ‘âŸœcubesâˆ˜âŠ‘ _Move
PW â† +Â´1000â€¿4â€¿1Ã—Â·âˆ¾1âŠ¸+âŒ¾âŠ‘

â€¢Show PW start P1ËâŒ½instructions
â€¢Show PW start P2ËâŒ½instructions
